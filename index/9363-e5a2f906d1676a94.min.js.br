"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f55d420f-eef1-519a-9d7c-c9b522ad249e")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9363],{315072:(e,t,a)=>{a.d(t,{NI:()=>c,_Z:()=>n,h$:()=>l,hF:()=>r,mL:()=>o,pL:()=>i});let l="variable_create_modal--staticTitle--HS1IC",n="variable_create_modal--textInput--234SQ raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",r="variable_create_modal--input--d-tVA",i="variable_create_modal--tabGroup--WI9w0",o="variable_create_modal--variableSetSelectChevron--larcU",c="variable_create_modal--variableSetSelectInput--YUE3H"},241723:(e,t,a)=>{a.d(t,{f:()=>n});var l=a(664080);function n(e,t=new Map,a=!1){if(a)return r(e.getRoot(),t);let l=e.getCurrentPage();return null===l?{}:r(l,t)}function r(e,t){var a,n,i;let o={},c=e.getVariableConsumptionMap();if(Object.keys(c).length>0)for(let[r,u]of Object.entries(c)){if((null==u?void 0:u.isMixed)||(null==u?void 0:u.type)!==l.Z_n.ALIAS)continue;let c=null==u?void 0:u.value;if(!o[c]){o[c]={nodesUsed:{}};let e=null==(a=t.get(c))?void 0:a.name;e&&(o[c].name=e);let l=null==(n=t.get(c))?void 0:n.description;l&&(o[c].description=l);let r=null==(i=t.get(c))?void 0:i.resolvedType;r&&(o[c].resolvedType=r)}o[c].nodesUsed[e.guid]||(o[c].nodesUsed[e.guid]=[]),o[c].nodesUsed[e.guid].push(r)}for(let a of e.childrenNodes)Object.assign(o,r(a,t));return o}},50779:(e,t,a)=>{a.d(t,{f:()=>p});var l=a(411855),n=a(829826),r=a(42910),i=a(480201),o=a(487644),c=a(113420),u=a(757358),d=a(339652),s=a(449660),m=a(732223),v=a(50275),b=a(501191);function p({resolvedTypes:e,recordingKey:t}){let{showing:a,toggle:i,hide:s}=(0,c.B)("expression-builder-create-variable"),m=l.useRef(null),p=n.rf(n.Pt(t,"createVariableDropdown"),"click",l.useCallback(()=>{1===e.length?E(e[0]):i()},[e,i])),[f,h]=l.useState(!1),_=l.useRef(null),E=e=>{var t;let a=null==(t=m.current)?void 0:t.getBoundingClientRect();a&&(_.current={initialPosition:new r.Mi(a.left,a.top),resolvedType:e},h(!0))},C=()=>{h(!1)};return l.createElement(l.Fragment,null,l.createElement("button",{ref:m,className:v.ZS,onClick:p},l.createElement(o.B,{svg:b.A})),f&&(f&&_.current?l.createElement(d.IU,{initialPosition:_.current.initialPosition,resolvedType:_.current.resolvedType,onCreateVariable:C,onClose:C}):null),a&&m.current&&l.createElement(u.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>l.createElement(g,{key:e,resolvedType:e,onClose:s,showCreationModal:E,recordingKey:t}))))}function g({resolvedType:e,onClose:t,showCreationModal:a,recordingKey:r}){let o=(0,m.F)(e),c=n.rf(n.Pt(r,"createVariableOption",o.name),"click",l.useCallback(()=>{a(e),t()},[t,e,a]));return l.createElement(i.W.Option,{className:v.Fs,onClick:c},l.createElement(s.i,{type:e,showTooltip:!1}),o.name)}},339652:(e,t,a)=>{a.d(t,{C_:()=>O,IU:()=>B,Ty:()=>Z,iG:()=>W});var l=a(411855),n=a(188507),r=a(89865),i=a.n(r),o=a(794307),c=a(499200),u=a(868879),d=a(695614),s=a(829826),m=a(785341),v=a(507776),b=a(304913),p=a(838320),g=a(402791),f=a(162122),h=a(92158),_=a(664080),E=a(797811),C=a(725396),I=a(113420),y=a(772990),L=a(579038),V=a(455399),S=a(816665),T=a(460486),w=a(120550),A=a(31844),x=a(51431),N=a(208332),k=a(214710),R=a(627878),U=a(860168),M=a(315072),P=a(424148);let F=2*(0,c.jz)(U.dGl),W=304;function B({initialPosition:e,initialValue:t,resolvedType:a,onCreateVariable:n,onClose:r}){(0,T.NF)({resolvedType:a});let{onCreateVariableSubmit:i}=O({onCreateVariable:n,onClose:r});return l.createElement(K,{initialPosition:e,initialValue:t,resolvedType:a,onCreateVariableSubmit:i,onClose:r,recordingKey:"createVariableModal"})}function O({onCreateVariable:e,onClose:t}){return{onCreateVariableSubmit:function({varSetID:a,varName:l,varValue:n}){if(!_.CWU.isValidVariableName(l,a)){(0,m.x1)("variables","Attempted to submit variable name that is invalid",{varName:l,_varSetID:a});return}E.l7.user("create-variable",()=>{let t=a??_.CWU.createVariableSet((0,g.t)("variables.variable_collection"),_.G6k.AUTOMATIC_FIRST_COLLECTION),r=_.CWU.createVariable(l,t,n,_.HS4.VARIABLE_PICKER),i=_.CWU.getLocalVariableInfo(r);(0,o.B1)(i,`variable with id ${r} not found`),e((0,y.kz)(i))}),t()}}}function K({initialPosition:e,initialValue:t,resolvedType:a,recordingKey:n,onCreateVariableSubmit:r,onClose:i}){return l.createElement(w.vx,{title:l.createElement("div",{className:M.h$},l.createElement(g.Tx,{id:"variables.create_modal.title"})),initialPosition:e,initialWidth:W,onClose:i},l.createElement(Z,{resolvedType:a,initialValue:t,recordingKey:s.Pt(n,"createVariableForm"),onSubmit:r}))}function Z({resolvedType:e,initialValue:t,recordingKey:a,onSubmit:r}){let i=(0,n.wA)(),o=(0,C.yp)(),m=(0,l.useRef)(null),[E,I]=(0,v.Vc)("last-used-variable-set-bottoms-up",o.length>0?o[0].node_id:null),y=(0,l.useMemo)(()=>{let e=o.find(e=>e.node_id===E);return!e&&o.length>0?o[0]:e},[o,E]),S=(0,C.rW)((null==y?void 0:y.node_id)??null),[T,w]=(0,l.useState)((0,k.Wc)(S,e)),W=(0,l.useRef)(null);(0,u.h)(()=>{var e;null==(e=W.current)||e.select()});let[B,O]=(0,l.useState)(()=>t??(0,k.WI)(e)),K=function(e){let t=(0,C.BQ)(e.type===_.Z_n.ALIAS?e.value:void 0);return(0,d.Vq)(t)&&"MIXED"!==t?t:null}(B),Z=(0,l.useMemo)(()=>_.CWU.isValidVariableName(T,(null==y?void 0:y.node_id)??null),[T,null==y?void 0:y.node_id]);async function z(t){if(t){let a=await i((0,h.Oe)(t));O((0,N.y$)(e,a))}else B.type===_.Z_n.ALIAS&&O((0,k.WI)(e))}(0,l.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("contextmenu",t),()=>{e.removeEventListener("contextmenu",t)}},[m]);let D=s.of(a,"submit",()=>{r({varName:T,varValue:B,varSetID:(null==y?void 0:y.node_id)??null})});function j({label:e,input:t}){return l.createElement(f.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:F}},l.createElement(V.JU,null,e),t)}return l.createElement("form",{onSubmit:D},l.createElement(f.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:m},l.createElement(f.Y,{direction:"vertical",spacing:`${(0,c.jz)(U.dGl)}px`,padding:{top:F},height:"hug-contents"},o.length>0&&!!y&&j({label:l.createElement(g.Tx,{id:"variables.create_modal.collection_label"}),input:l.createElement("div",{className:M.hF},l.createElement($,{selectedVariableSetID:y.node_id,variableSets:o,onChange:I}))}),j({label:l.createElement(g.Tx,{id:"variables.create_modal.name_label"}),input:l.createElement(p.L,{className:M._Z,name:"variableName",value:T,onChange:e=>{w(e.target.value)},ref:W,recordingKey:s.Pt(a,"variableNameInput"),delay:50,autoFocus:!0})}),j({label:l.createElement(g.Tx,{id:"variables.create_modal.value_label"}),input:l.createElement("div",{className:M.hF},l.createElement(x.Cr,{resolvedType:e,variableValue:B,onVariableValueChange:e=>O(e),onVariableSelected:z},l.createElement(R.g,{variableValue:B,contextType:A.$.FORM,onChange:e=>O(e),recordingKey:s.Pt(a,"variableValueInput")}),K&&l.createElement(V.K0,{svg:P.A,type:"button","data-tooltip-type":L.Ib.TEXT,"data-tooltip":(0,g.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>O(K),recordingKey:s.Pt(a,"detachVariableButton")})))}))),l.createElement(f.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},l.createElement(b.$$,{style:{justifySelf:"right"},tabIndex:0,type:"submit",disabled:!Z,recordingKey:s.Pt(a,"createButton"),"data-tooltip-type":Z?void 0:L.Ib.TEXT,"data-tooltip":(0,g.t)("variables.create_modal.invalid_variable_name")},l.createElement("span",null,l.createElement(g.Tx,{id:"variables.create_modal.create_button"})))))}function $({selectedVariableSetID:e,variableSets:t,onChange:a}){let r=(0,n.wA)(),o=(0,I.U)(),c=(0,l.useMemo)(()=>i()(t,e=>e.node_id),[t]);return l.createElement(S.l6,{id:"variable-create-modal-variable-set-select",property:c[e],formatter:{format:e=>(null==e?void 0:e.name)??""},dispatch:r,chevronClassName:M.mL,inputClassName:M.NI,dropdownShown:o,onChange:e=>a(e.node_id)},t.map(function(e){return l.createElement(S.c$,{key:e.node_id,value:e})}))}},293775:(e,t,a)=>{a.d(t,{C:()=>n});var l=a(411855);function n(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m4.7 4.7.315-1.26c.126-.505.844-.505.97 0L6.3 4.7l1.26.315c.505.126.505.844 0 .97L6.3 6.3l-.315 1.26c-.126.505-.844.505-.97 0L4.7 6.3l-1.26-.315c-.505-.126-.505-.844 0-.97L4.7 4.7Zm4.49 4.491 1.117-3.908c.486-1.702 2.898-1.702 3.384 0L14.81 9.19l3.908 1.117c1.702.486 1.702 2.898 0 3.384L14.81 14.81l-1.117 3.908c-.486 1.702-2.898 1.702-3.384 0L9.19 14.81l-3.908-1.117c-1.702-.486-1.702-2.898 0-3.384L9.19 9.19ZM10 10l1.27-4.442c.21-.735 1.25-.735 1.46 0L14 10l4.442 1.27c.735.21.735 1.25 0 1.46L14 14l-1.27 4.442c-.21.735-1.25.735-1.46 0L10 14l-4.442-1.27c-.735-.21-.735-1.25 0-1.46L10 10Zm8.015 6.44L17.7 17.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97L19.3 17.7l-.315-1.26c-.126-.505-.844-.505-.97 0Z",clipRule:"evenodd"}))}}}]);

//# debugId=f55d420f-eef1-519a-9d7c-c9b522ad249e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/e5a42fb319bb1cb18c2c61f31d12261b8ad4b32f/9363-e5a2f906d1676a94.min.js.map